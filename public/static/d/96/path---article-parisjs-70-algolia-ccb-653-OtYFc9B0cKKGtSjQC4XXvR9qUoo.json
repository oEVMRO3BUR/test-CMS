{"data":{"article":{"frontmatter":{"title":"Meetup Paris.js 70 @Algolia","author":"Chris","excerpt":"API Client, GraphQL et Async Hook","date":"31/01/2018","tags":["meetup","paris-js","javascript"],"illustration":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHNa/SicqF//8QAGhAAAwEAAwAAAAAAAAAAAAAAAQIDAAQREv/aAAgBAQABBQJXIST0wLHSRfElC8fs7//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAQACAwEAAAAAAAAAAAAAAAEAAhARIXH/2gAIAQEABj8CIFa7ndj5DkEx/8QAGxAAAgMAAwAAAAAAAAAAAAAAAAERIUExUYH/2gAIAQEAAT8hj5yYpqOBRXYiwx6ECw+/S53p/9oADAMBAAIAAwAAABD87//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ECf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEBAAICAwEAAAAAAAAAAAABEQAhMUFxgaHw/9oACAEBAAE/EEnlJtWFNfXDX9NE6VVZ+1lGLYGvqtcOit8q95K68Ve2Pkzoz//Z","aspectRatio":1.7777777777777777,"src":"/static/6daebce4326743077248bfeb5da64585/bc3a8/cover.jpg","srcSet":"/static/6daebce4326743077248bfeb5da64585/d278e/cover.jpg 200w,\n/static/6daebce4326743077248bfeb5da64585/8539d/cover.jpg 400w,\n/static/6daebce4326743077248bfeb5da64585/bc3a8/cover.jpg 800w,\n/static/6daebce4326743077248bfeb5da64585/81ef8/cover.jpg 1200w,\n/static/6daebce4326743077248bfeb5da64585/989b1/cover.jpg 1600w,\n/static/6daebce4326743077248bfeb5da64585/69483/cover.jpg 4160w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Je vous propose un résumé des talks du "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"meetup #70 de Paris.js chez Algolia le 31 janver 2018"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Pardonnez la forme brute et le franglais, l'idée est de retranscrire le contenu avant tout."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Conf 1 : You're probably making an API client"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Par Hareoen Viaene @Algolia"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Constat"}]},{"type":"text","value":" : des API dans tous les sens, qu'elles soient officielles / voulues ou non. => donc autant appliquer les bonnes pratiques même lorsqu'on ne veut pas vraiment faire de client API :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Separate the request from the core code (classique) ;"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Wrap the fetch in a wrapper, then you don't care how the wrapper is implemented and can change it later ;"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Instancier un objet apiClient qui connait les API keys (invariables pour tous les appels)."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Conf 2 : An intro to graphql with JS"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Par Alexandre Bodin"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Principe"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"GraphQL = langage d'interrogation créé par FB pour optimiser les requêtes qui agrègent des données"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Typage et syntaxe propres"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Possibilité d'agréger des données sans faire de multiples A/R sur l'API (par exemple, demander TOUS les auteurs et TOUS leurs livres en une fois)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"API côté serveur : déclaration d'un schéma de ce que doit proposer l'API, des requêtes en BDD correspondantes"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Outils côté client"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Apollo (équipe de MeteorJS) : grande communauté, compatible avec beaucoup de frameworks ou libs, bon pour démarrer"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Relay (de FB) : très intégré à react, optimisé, compile, communauté moins grande, plus complexe"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Dans les deux cas, queries en cache après le fetch"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Pros"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Pas de réel inconvénient à l'utiliser"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Implémentation proche d'un appel à une API"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Pas de documentation de l'API à produire car faite automatiquement par la fonction d'introspection"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Cache nativement géré"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Cons"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Pas grand-chose"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Pas possible de faire du cache HTTP en get car un seul endpoint graphql en POST"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Conf 3 : Async hook sur node.js"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Par Vladimir De Turckheim @Sqreen & reviewer Node.js officiel"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Problématique"}]},{"type":"text","value":" : stacktraces très courtes en node à cause de l'event loop. En opérations asynchrones, Node perd la notion de contexte => impossible à debugger !"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Solutions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Les domains : créer un contexte d'exécution asynchrone et catcher toutes les erreurs non handlées. Mais performance killer ! + Deprecated, en cours de décommissionnement."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Userland patching : override toutes les méthodes asynchrones du code et l'encadre. Mais ne marche pas avec async / await. + Doit documenter toutes les méthodes appelées !"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Async_hooks"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Mettre 4 hooks autour des opérations asynchrones : init, before (avant que le callback ne soit appelé), after (après que le callback est appelé), destroy."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Permet de connaître l'ID de l'opération async parente et enfant, et donc récupérer le contexte parent et le passer à l'enfant, et afficher la stacktrace complète en cas de catch chez l'enfant."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"OUI MAIS"}]},{"type":"text","value":" (info récente) : parfois perte de 30% des perfs."}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}}},"tagRef":{"edges":[{"node":{"fields":{"slug":"/approfondir-js"},"frontmatter":{"tags":["javascript"],"title":"Parlons un peu JavaScript !","author":"Alexandre","excerpt":"Quelques points intéressants, souvent mal connus","date":"08/10/2019"}}},{"node":{"fields":{"slug":"/cra-blockchain"},"frontmatter":{"tags":["blockchain","ethereum","javascript","atelier"],"title":"CRA blockchain","author":"Michel","excerpt":"Une feuille de temps sur une chaine de blocs","date":"09/10/2018"}}},{"node":{"fields":{"slug":"/evoluchain-breakfast"},"frontmatter":{"tags":["blockchain","meetup"],"title":"Enjeux de la Blockchain par Evoluchain ","author":"Jérémy","excerpt":"Breakfast café/tartine/blockchain par nos camarades d'Evoluchain","date":"09/04/2018"}}},{"node":{"fields":{"slug":"/initiation-react"},"frontmatter":{"tags":["javascript"],"title":"Découverte de React du point de vue d’un dev junior","author":"Benoit","excerpt":"Découvrez l'initiation d'un dev junior dans le monde du web","date":"24/10/2019"}}},{"node":{"fields":{"slug":"/meetup-deus"},"frontmatter":{"tags":["data","machine learning","meetup"],"title":"Meetup Code It Up: Deus Ex Machine Learning","author":"Matthieu","excerpt":"Comprendre le machine learning sans hashtag","date":"30/03/2018"}}},{"node":{"fields":{"slug":"/meetup-mario-nn"},"frontmatter":{"tags":["data","machine learning","meetup"],"title":"Meetup Code It Up: Mario Neural Network","author":"Matthieu","excerpt":"Le meetup qui a cassé des briques","date":"01/07/2018"}}},{"node":{"fields":{"slug":"/parisjs-70-algolia"},"frontmatter":{"tags":["meetup","paris-js","javascript"],"title":"Meetup Paris.js 70 @Algolia","author":"Chris","excerpt":"API Client, GraphQL et Async Hook","date":"31/01/2018"}}},{"node":{"fields":{"slug":"/parisjs-71-keymetrics"},"frontmatter":{"tags":["meetup","paris-js","javascript"],"title":"Meetup Paris.js 71 @Keymetrics","author":"Chris","excerpt":"Introduction à React Native","date":"28/02/2018"}}},{"node":{"fields":{"slug":"/parisjs-74-scaleway"},"frontmatter":{"tags":["meetup","paris-js","javascript"],"title":"Meetup Paris.js 74 @Scaleway","author":"Chris","excerpt":"Automated testing, GRPC et Histoire du web","date":"30/05/2018"}}},{"node":{"fields":{"slug":"/theremine-coddity"},"frontmatter":{"tags":["javascript","atelier"],"title":"Projet Thérémine","author":"Axel","excerpt":"What else?","date":"19/03/2018"}}}]},"infoAuthor":{"edges":[{"node":{"frontmatter":{"title":"Co-fondateur de Coddity","author":"Chris","date":"2016-04-26","excerpt":"All your base are belong to us","illustration":{"childImageSharp":{"resize":{"src":"/static/8f9ee0024ef1ddadcf17ebe91a693a66/28898/cover.png"}}}},"fields":{"slug":"/chris"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/parisjs-70-algolia","tags":["meetup","paris-js","javascript"],"author":"Chris"}}